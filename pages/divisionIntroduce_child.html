<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no">
        <meta name="format-detection" content="telephone=no">
        <link rel="stylesheet" href="../css/frozen.css">
        <link rel="stylesheet" href="../css/style.css"/>
        
        <script src="../lib/zepto.min.js"></script>
        <script src="../js/frozen.js"></script>
        <script src="../js/Utils.js" ></script>
		<title>选择科室</title>
		<style type="text/css">
			html,body{background-color: #F1F0F8;}
			.keshi{display: block;width: 100%;height: 100%;margin-top: 20px;} 
			.keshi_item{display: block;float: left;width: 94%;margin-left: 3%;height: 50px;line-height: 50px;background-color: #FFFFFF;margin-top: 5px;border-radius: 4px;}
			
			.box_img{display: block;float: left;padding-left: 10px;}
			.box_img>img{display: block;width: 30px;height: 30px;margin-top: 10px;}
			.box_con{display: block;float: left;padding-left: 10px;color: #127674;}
			.box_icon{display: block;float: right;}
			.box_icon>i{line-height: 50px;color: #88BFC9;}
		</style> 
	</head>
	<body>
		<header class="ui-header ui-header-positive">
			<i class="ui-icon ui-icon-return" onclick="history.back()"></i>
			<h4 style="margin-left: 25px;" id="dep_type" ><span>科室介绍</span> </h4>
		</header>
		
		<section class="ui-container">
			<div class="keshi" id="department">
				<div class="keshi_item">
					<span class="box_con">普通外科门诊</span>
					<span class="box_icon"><i class="ui-icon ui-icon-arrow"></i></span>
				</div>
				<div class="keshi_item">
					<span class="box_con">普通内科门诊</span>
					<span class="box_icon"><i class="ui-icon ui-icon-arrow"></i></span>
				</div>
				<div class="keshi_item">
					<span class="box_con">普通外科门诊</span>
					<span class="box_icon"><i class="ui-icon ui-icon-arrow"></i></span>
				</div>
				<div class="keshi_item">
					<span class="box_con">普通外科门诊</span>
					<span class="box_icon"><i class="ui-icon ui-icon-arrow"></i></span>
				</div>
				<div class="keshi_item">
					<span class="box_con">普通外科门诊</span>
					<span class="box_icon"><i class="ui-icon ui-icon-arrow"></i></span>
				</div>
				<div class="keshi_item">
					<span class="box_con">普通外科门诊</span>
					<span class="box_icon"><i class="ui-icon ui-icon-arrow"></i></span>
				</div>
			</div>
		</section>
	</body>
	 
	<script type="text/javascript">
		/*$(function() {
			var id = "";
			
			var bodyHeight = document.body.clientHeight;
			$(".kes_left, .kes_right").height(bodyHeight-50+"px");
			
			$(".keshi").on("click",".left_box",function(){
				var hasActive = $(this).hasClass("active");
				if(!hasActive){
					$(this).addClass("active").siblings(".left_box").removeClass("active");
					$(this).children(".box_img").children("span").addClass("open");
					$(this).siblings(".left_box").children(".box_img").children("span").removeClass("open");
					
					$("div[name='"+id+"']").hide();
					id = $(".left_box.active").attr("id");
					$("div[name='"+id+"']").show();
				}
				
			});
			//查询全部科室
			var params={};
			$.post(Utils.getRoot()+"/inquiry/findDivision2",params,function(res){
				if (res.success) {
					createdepartment(res.data);
				}
			});
			
			function createdepartment(data) {
				//前清空之前的父级科室、子级科室
				$("#department").empty();
				var department = $("#department");
				var n = data.length;
				
				//左菜单栏，存放父级科室
				var kleft = $('<div class="kes_left"><div style="min-height: 1px;max-height: 1200px;overflow-y: auto;"></div></div>');
				for (var i = 0; i < n; i++) {
					var parentdepartment = '';
					
					if (i == 0) {
						id = data[i].deptCode;
						parentdepartment = '<div class="left_box active" id="'+id+'">'+
											'<span class="box_img a"><span class="box_imgScr_a open"></span></span>'+
											'<span class="box_name">'+data[i].deptName+'</span>'+
										'</div>';
						
						var m = data[i].childs.length;
						//判断是否有子级
						if (m > 0 ) {
							var cdata = new Object();
							cdata = data[i].childs;
							//右菜单栏，存放子级科室
							var kright = $('<div class="kes_right" name="'+data[i].deptCode+'"><div style="min-height: 100px;max-height: 1200px;overflow-y: auto;" ></div></div>');
							for (var j = 0; j < m; j++) {
								var childdepartment = '';
								childdepartment = '<div class="right_box" id="'+cdata[i].deptCode+'">'+
												'<span class="box_con ">'+cdata[i].deptName+'</span>'+
												'<i class="ui-icon-arrow"></i>'+
											'</div>';
											
								kright.append(childdepartment);
							}
							department.append(kright);
						}
						
						$("div[name='"+id+"']").show();
					} else {
						
						parentdepartment = '<div class="left_box" id="'+data[i].deptCode+'">'+
											'<span class="box_img a"><span class="box_imgScr_a"></span></span>'+
											'<span class="box_name">'+data[i].deptName+'</span>'+
										'</div>';
						var m = data[i].childs.length;
						//判断是否有子级
						if (m > 0 ) {
							var cdata = new Object();
							cdata = data[i].childs;
							//右菜单栏，存放子级科室
							var kright = $('<div class="kes_right" name="'+data[i].deptCode+'"><div style="min-height: 100px;max-height: 1200px;overflow-y: auto;" ></div></div>');
							for (var j = 0; j < m; j++) {
								var childdepartment = '';
								childdepartment = '<div class="right_box" id="'+cdata[i].deptCode+'">'+
												'<span class="box_con ">'+cdata[i].deptName+'</span>'+
												'<i class="ui-icon-arrow"></i>'+
											'</div>';
											
								kright.append(childdepartment);
							}
							department.append(kright);
						}
						$("div[name='"+data[i].deptCode+"']").hide();
					}
					kleft.append(parentdepartment);
				}
				
				//添加父级科室
				department.append(kleft);
			}
		});*/
	</script>
</html>
