<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
        <meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no">
        <meta name="format-detection" content="telephone=no">
        <link rel="stylesheet" href="../../css/frozen.css">
        <link rel="stylesheet" href="../../css/style.css" />
        <script src="../../lib/zepto.min.js"></script>
        <script src="../../js/frozen.js"></script>
        <script src="../../js/Utils.js"></script>
        <title>诊间缴费</title>
        
        <style type="text/css">
        	html,body{width:100%; background-color: #F3F3F3;}
        	.pay_list{display: block;float: left;width: 100%;height: 100%;}
        	.pay_tab{display: block;float: left;width: 100%; margin-bottom: 10px;height: 50px;line-height: 50px;color:#FFFFFF;background-color: #1281E8;}
        	.box_tab{display: block;float: left;width: 25%;margin-left: 16%; height: 48px;text-align: center;}
        	.box_tab.active{color: #FFFFFF;border-bottom: 2px solid #FFFFFF;}
        	.wjf_con{display: block;float: left;width: 100%;}
        	.wjf_item{display: block;float: left;width: 88%;margin-left: 3%; border-radius: 3px; min-height: 50px;max-height: 150px; margin-top: 8px;background-color: #FFFFFF;padding: 7px 3%;}
        	.wjf_item>span{display: block;line-height: 25px;font-size: 14px;color: #008080;width: 100%;}
        	.yjf_con{display: none;float: left;width: 100%;}
        	.yjf_item{display: block;float: left;width: 88%;margin-left: 3%; border-radius: 3px; min-height: 50px;max-height: 150px; margin-top: 8px;background-color: #FFFFFF;padding: 7px 3%;}
        	.yjf_item>span{display: block;line-height: 25px;font-size: 14px;color: #008080;width: 100%;}
        	.list-item{display: block;float: left;width: 100%;min-height: 50px;max-height: 150px;background-color: #FFFFFF;border-bottom: 1px solid #F7F7F7;}
        	.notData{color: #999999;text-align: center;line-height: 50px;}
        </style>
        
        <script type="text/javascript">
        	$(function(){
        		wjfList();
        		
        		$(".box_tab").on("click",function(){
					var a = $(this).hasClass("active");
					if(!a){
						$(this).addClass("active").siblings(".box_tab").removeClass("active");
						if ($(this).attr("id")=="wjf") {
							$(".yjf_con").html("");
							$(".wjf_con").show();
							wjfList();
						} else{
							$(".yjf_con").show();
							$(".wjf_con").html("");
						}
					}
				});
				
        		
        		
        		function wjfList(){
        			
        			var params={};
	        		$.post(Utils.getRoot()+"/outpatientPayment/selPayorder",params,function(data){
							console.log(JSON.stringify(data));
						if (data.success) {
							var listPayorder = new Array();
							listPayorder= data.data;
							console.log(listPayorder);
							for (var i = 0; i < listPayorder.length; i++) {
								var totalAmt = parseInt(listPayorder[i].totalAmt)/100;
								$("#wjfList").append(
									"<div class='wjf_item' >"+
										"<input type='hidden' name='listPayorder'  value='"+listPayorder[i]+"'/>"+
										"<span class='box_type'>订单号："+listPayorder[i].hisOrdNum+"</span>"+
										"<span class='box_type'>缴费项目："+listPayorder[i].payName+"</span>"+
										"<span class='box_type'>科室姓名："+listPayorder[i].deptName+"</span>"+
										"<span class='box_type'>医生姓名："+listPayorder[i].doctorName+"</span>"+
										"<span class='box_money'>总费用："+totalAmt+" 元</span>"+
									"</div>"
								)
							}
						}else{
							$("#wjfList").append(
								"<div class='list-item '>"+
									"<p class='notData'>暂无数据</p>"+
								"</div>"
							);
						}
					});
        		}
        		
        		$("#wjfList").on("click",".wjf_item",function(){
        			var listPayorder = $(this).children("input[name='listPayorder']").val();
        			window.location.href="../payment/payDetail_view.html?listPayorder="+listPayorder;
        		});
        		
        		
        	})
       </script>
	</head>
	<body>
		<header class="ui-header ui-header-positive">
			<i class="ui-icon ui-icon-return" onclick="history.back()"></i>
			<h4 style="margin-left: 25px;">诊间缴费</h4>
		</header>
		<section class="ui-container">
			<div class="demo-block">
				<div class="pay_list">
					<div class="pay_tab">
						<span class="box_tab active" id="wjf">未缴费</span>
						<span class="box_tab " id="yjf">已缴费</span>
					</div>
					<div class="wjf_con" id="wjfList">
						<!--<div class="wjf_item" >
							<span class="box_type">订单号：456456456</span>
							<span class="box_type">科室姓名：内科门诊</span>
							<span class="box_type">医生姓名：张三</span>
							<span class="box_money">总费用：129元</span>
						</div>-->
					</div>
					
					<div class="yjf_con">
						<a href="payDetail_yjf_view.html">
							<div class="yjf_item">
								<span class="box_type">接诊科室：内科门诊（已缴费）</span>
								<span class="box_money">已缴总额：129元</span>
								<span class="box_time">缴费时间：2018-05-21 15:22</span>
							</div>
						</a>
					</div>
					
				</div>
			</div>
		</section>
		
	</body>
</html>
